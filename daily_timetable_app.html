<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daily Timetable â€“ Click to Complete</title>
  <style>
    :root{
      --bg: #0f172a;
      --panel: #0b1222;
      --card: #111827;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --accent: #60a5fa;
      --ok: #22c55e;
      --warn: #f59e0b;
      --danger:#ef4444;
      --border: #1f2937;
      --done-bg: #052e16;
      --done-border:#15803d;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 900px at 10% -10%, #1f2937 0%, transparent 50%),
                  radial-gradient(1000px 700px at 110% 10%, #1e293b 0%, transparent 55%),
                  linear-gradient(180deg, #0b1020, #0a0f1d 40%, #070b16);
      color: var(--text);
      padding:18px;
    }
    .app{
      max-width: 980px;
      margin:0 auto;
      background:rgba(17,24,39,.6);
      border:1px solid var(--border);
      border-radius: 18px;
      overflow:hidden;
      box-shadow: 0 20px 60px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.03) inset;
      backdrop-filter: blur(6px);
    }
    header{
      padding:22px 22px 12px;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:14px 18px;
      background:linear-gradient(180deg, rgba(96,165,250,.10), transparent 40%);
    }
    .title{
      font-weight:700;
      letter-spacing:.2px;
      font-size: clamp(18px, 2.4vw, 22px);
      display:flex; align-items:center; gap:10px;
    }
    .subtitle{
      color:var(--muted);
      font-size: 12px;
    }
    .grow{flex:1}
    .controls{
      display:flex; flex-wrap:wrap; gap:8px;
    }
    button{
      appearance:none; border:1px solid var(--border);
      background:#0b1222; color:var(--text);
      padding:9px 12px; border-radius:10px; cursor:pointer;
      font-weight:600; font-size:12px; letter-spacing:.2px;
      transition: .15s ease;
    }
    button:hover{ transform: translateY(-1px); border-color:#263141; }
    .primary{ background: linear-gradient(180deg, #2563eb, #1d4ed8); border-color:#1d4ed8; }
    .primary:hover{ filter:brightness(1.05) }
    .ghost{ background:transparent }
    .danger{ background: linear-gradient(180deg, #ef4444, #dc2626); border-color:#b91c1c; }
    .ok{ background: linear-gradient(180deg, #16a34a, #15803d); border-color:#166534; }
    .warn{ background: linear-gradient(180deg, #f59e0b, #d97706); border-color:#b45309; }
    .stats{
      display:flex; gap:14px; align-items:center; flex-wrap:wrap;
      padding:0 22px 18px;
    }
    .progress-wrap{
      display:flex; align-items:center; gap:12px;
      background: #0b1222; border:1px solid var(--border); border-radius:12px; padding:10px 12px;
    }
    .progress{
      --v: 0;
      width: 180px; height: 10px; border-radius: 999px; overflow: hidden; background: #0a0f1d; border:1px solid #1f2937;
      position:relative;
    }
    .progress::after{
      content:""; position:absolute; inset:0; width: calc(var(--v) * 1%);
      background: linear-gradient(90deg, #22d3ee, #60a5fa, #a78bfa);
      box-shadow: 0 0 16px rgba(96,165,250,.5);
      border-radius:inherit;
      transition: width .25s ease;
    }
    .progress-label{ font-size:12px;color:var(--muted)}
    .list{
      display:grid; gap:8px; padding:10px 12px 18px;
    }
    .block{
      display:grid; grid-template-columns: 120px 1fr auto;
      align-items:center; gap:12px;
      background: #0b1222; border:1px solid var(--border); border-radius:14px;
      padding:14px;
      transition:.15s ease;
      position:relative;
    }
    .block:hover{ border-color:#2a3647; transform: translateY(-1px); }
    .time{ color:#c7d2fe; font-weight:700; font-size:13px; text-align:center }
    .activity{ font-weight:700; font-size:15px; }
    .notes{ color:var(--muted); font-size:12px; margin-top:2px }
    .actions{ display:flex; gap:6px; align-items:center }
    .chip{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); color:#cbd5e1;
      background:#0a0f1d;
    }
    .now{ border-color:#334155; box-shadow:0 0 0 2px rgba(59,130,246,.15) inset; }
    .done{
      background: linear-gradient(180deg, var(--done-bg), #031a10);
      border-color: var(--done-border);
      opacity: .95;
    }
    .done .activity{text-decoration: line-through; color:#86efac}
    .done .time{ color:#86efac }
    .todo-btn{
      font-size:12px; border-radius:999px; padding:6px 10px;
      background:linear-gradient(180deg, #3b82f6, #1d4ed8); border-color:#1d4ed8;
    }
    .toggle-btn{ background:transparent }
    .footer{
      padding:14px 18px; color:var(--muted); font-size:12px; display:flex; justify-content:space-between; flex-wrap:wrap; gap:8px;
      border-top:1px solid var(--border);
      background:linear-gradient(180deg, rgba(168,85,247,.06), transparent)
    }
    .small{font-size:11px; color:var(--muted)}
    @media (max-width:720px){
      .block{ grid-template-columns: 88px 1fr; }
      .actions{ grid-column: span 2; justify-content:flex-end }
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="title">ðŸ“… Daily Timetable <span class="subtitle" id="dayLabel"></span></div>
      <div class="grow"></div>
      <div class="controls">
        <button class="ok" id="markAll">Mark All Done</button>
        <button class="warn" id="resetToday">Reset Today</button>
        <button class="ghost" id="compactToggle">Compact</button>
        <button class="ghost" id="exportState">Export</button>
        <button class="ghost" id="importState">Import</button>
      </div>
    </header>

    <div class="stats">
      <div class="progress-wrap">
        <div class="progress" id="progress"></div>
        <div class="progress-label" id="progressLabel">0% complete</div>
      </div>
      <span class="chip" id="doneCount">0 done</span>
      <span class="chip" id="leftCount">0 left</span>
      <span class="chip" id="currentBlock">â€”</span>
    </div>

    <div class="list" id="list"></div>

    <div class="footer">
      <div>Tip: Click anywhere on a block to toggle completion. Progress saves automatically (per day).</div>
      <div class="small">Made for local offline use â€“ no network required.</div>
    </div>
  </div>

  <script>
    // --- Data: your timetable blocks ---
    const blocks = [
      ["5:00 â€“ 5:20 AM","Wake up + Brush/Toilet","Fresh start, light stretching"],
      ["5:20 â€“ 5:50 AM","Self-Hypnosis","Deep focus for clarity & calm"],
      ["5:50 â€“ 6:20 AM","Reading","Personal growth / Scrum/Agile"],
      ["6:20 â€“ 6:35 AM","Affirmations","Positive mindset"],
      ["6:35 â€“ 6:40 AM","Scribing (journaling)","Reflection / gratitude"],
      ["6:40 â€“ 6:45 AM","Short Exercise","Push-ups, stretches, warm-up"],
      ["6:45 â€“ 7:30 AM","Walking","Physical activity + freshness"],
      ["7:30 â€“ 7:50 AM","Breakfast","Healthy meal"],
      ["7:50 â€“ 9:20 AM","Flex Time","Reading / Scrum practice / relax"],
      ["9:30 â€“ 11:30 AM","Job Search","Naukri + LinkedIn + Scrum prep"],
      ["11:30 â€“ 1:00 PM","Study/Project Work","Continue Scrum/Agile skill-building"],
      ["1:00 â€“ 1:30 PM","Buffer + Light Break","Stretch, hydrate"],
      ["1:30 â€“ 2:00 PM","Lunch","Balanced meal"],
      ["2:00 â€“ 3:00 PM","Mock Interview","Practice real scenarios"],
      ["3:00 â€“ 3:50 PM","Rest / Buffer","Power nap or relax"],
      ["4:00 â€“ 5:00 PM","Mock Interview","Skill reinforcement"],
      ["5:00 â€“ 6:30 PM","Study / Learning / Preparation","Focused Scrum/Agile deep dive"],
      ["6:30 â€“ 7:15 PM","Buffer + Relax","Tea break, light walk"],
      ["7:30 â€“ 9:00 PM","Focused Study / Preparation","High-focus zone"],
      ["9:00 â€“ 9:30 PM","Dinner","Light, healthy meal"],
      ["9:30 â€“ 10:00 PM","Evening Walk","Digestive walk + reflection"],
      ["10:00 â€“ 10:15 PM","Wind Down","Journaling / light reading"],
      ["10:15 â€“ 10:30 PM","Prep for Sleep","Phone-free zone"],
      ["10:30 PM","Sleep","~6.5 hrs rest"]
    ];

    // Helpers
    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => [...el.querySelectorAll(q)];

    const todayKey = () => {
      const d = new Date();
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,'0');
      const day = String(d.getDate()).padStart(2,'0');
      return `timetable:${y}-${m}-${day}`;
    };

    const prettyDay = () => {
      return new Date().toLocaleDateString(undefined, { weekday:'long', year:'numeric', month:'short', day:'numeric' });
    };

    const parseTimeToMinutes = (text) => {
      // Extract first time in the block, handle AM/PM
      const m = text.match(/(\d{1,2}):(\d{2})\s*(AM|PM)?/i);
      if(!m) return null;
      let h = +m[1], min = +m[2];
      const ampm = (m[3]||"").toUpperCase();
      if(ampm === "PM" && h !== 12) h += 12;
      if(ampm === "AM" && h === 12) h = 0;
      return h*60 + min;
    };

    // State
    let state = { done: Array(blocks.length).fill(false), compact:false };

    const save = () => localStorage.setItem(todayKey(), JSON.stringify(state));
    const load = () => {
      const raw = localStorage.getItem(todayKey());
      if(raw){
        try { state = JSON.parse(raw); }
        catch(e){ console.warn("Bad state", e); }
      }
    };

    // Reset automatically if new day
    const ensureFreshDay = () => {
      // remove all previous day keys except today to avoid bloat
      const keep = todayKey();
      for(let i=0;i<localStorage.length;i++){
        const k = localStorage.key(i);
        if(k && k.startsWith("timetable:") && k !== keep) {
          // do not delete here while iterating (index shift) â€“ mark and delete after
        }
      }
      // initialize today's state if absent
      if(!localStorage.getItem(keep)){
        state = { done: Array(blocks.length).fill(false), compact:false };
        save();
      }
    };

    // Render
    const render = () => {
      $("#dayLabel").textContent = `â€¢ ${prettyDay()}`;
      const list = $("#list");
      list.innerHTML = "";
      blocks.forEach((b, i) => {
        const [time, activity, notes] = b;
        const wrap = document.createElement("div");
        wrap.className = "block";
        wrap.dataset.index = i;

        // Current-time hint
        const blockStart = parseTimeToMinutes(time);
        const next = blocks[i+1]?.[0];
        const nextStart = next ? parseTimeToMinutes(next) : 24*60;
        const now = new Date(); const nowM = now.getHours()*60 + now.getMinutes();
        if(blockStart !== null && nowM >= blockStart && nowM < nextStart){
          wrap.classList.add("now");
          $("#currentBlock").textContent = `Now: ${activity}`;
        }

        if(state.done[i]) wrap.classList.add("done");
        if(state.compact) wrap.style.padding = "10px 12px";

        const t = document.createElement("div");
        t.className = "time"; t.textContent = time;

        const c = document.createElement("div");
        const a = document.createElement("div");
        a.className = "activity"; a.textContent = activity;
        const n = document.createElement("div");
        n.className = "notes"; n.textContent = notes;
        c.appendChild(a); c.appendChild(n);

        const actions = document.createElement("div");
        actions.className = "actions";
        const toggle = document.createElement("button");
        toggle.className = "todo-btn";
        toggle.textContent = state.done[i] ? "Completed âœ“" : "Mark Done";
        const skip = document.createElement("button");
        skip.className = "toggle-btn";
        skip.textContent = "Toggle";

        actions.appendChild(toggle);
        actions.appendChild(skip);

        wrap.appendChild(t);
        wrap.appendChild(c);
        wrap.appendChild(actions);
        list.appendChild(wrap);

        const handler = () => {
          state.done[i] = !state.done[i];
          save(); updateStats(); render();
        };
        wrap.addEventListener("click", (e)=>{
          // avoid double when clicking buttons (still fine to toggle)
          handler();
        });
        toggle.addEventListener("click", (e)=>{ e.stopPropagation(); handler(); });
        skip.addEventListener("click", (e)=>{ e.stopPropagation(); handler(); });
      });
      updateStats(true);
    };

    const updateStats = (skipSave=false) => {
      const total = state.done.length;
      const done = state.done.filter(Boolean).length;
      $("#doneCount").textContent = `${done} done`;
      $("#leftCount").textContent = `${total-done} left`;
      const pct = Math.round(done/total*100);
      $("#progress").style.setProperty("--v", pct);
      $("#progressLabel").textContent = `${pct}% complete`;
      if(!skipSave) save();
    };

    // Buttons
    $("#markAll").addEventListener("click", ()=>{
      state.done = state.done.map(()=>true); save(); render();
    });
    $("#resetToday").addEventListener("click", ()=>{
      if(confirm("Reset all tasks for today?")){
        state.done = state.done.map(()=>false); save(); render();
      }
    });
    $("#compactToggle").addEventListener("click", ()=>{
      state.compact = !state.compact; save(); render();
    });

    // Export/Import JSON
    $("#exportState").addEventListener("click", ()=>{
      const blob = new Blob([JSON.stringify(state,null,2)], {type:"application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url; a.download = `timetable-${new Date().toISOString().slice(0,10)}.json`;
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });
    $("#importState").addEventListener("click", ()=>{
      const input = document.createElement("input");
      input.type = "file"; input.accept = "application/json";
      input.onchange = (e)=>{
        const file = e.target.files[0]; if(!file) return;
        const reader = new FileReader();
        reader.onload = ()=>{
          try{
            const obj = JSON.parse(reader.result);
            if(Array.isArray(obj.done)){
              state.done = obj.done.map(Boolean);
            }
            if(typeof obj.compact === "boolean") state.compact = obj.compact;
            save(); render();
          }catch(err){ alert("Invalid file"); }
        };
        reader.readAsText(file);
      };
      input.click();
    });

    // Init
    $("#dayLabel").textContent = `â€¢ ${prettyDay()}`;
    ensureFreshDay(); load(); render();
    // Refresh "now" highlight every minute
    setInterval(render, 60_000);
  </script>
</body>
</html>
